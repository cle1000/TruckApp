var app = angular.module('truckApp', []);

function InputDataCtrl($scope, $http) {
	$scope.loadData = function() {
		$http
				.jsonp(
						'http://mtoserver.dyndns.org/mto/sql.php?callback=JSON_CALLBACK')
				.then(function(response) {
					$scope.inputDatas = response.data;
					getData();
				});
	};

	$scope.loadData();
}

function sendData(formId) {
	// validation Code
	var work = 1;
	$.ajax({
		type : 'POST',
		url : 'http://mtoserver.dyndns.org/mto/formToMail.php',
		data : $("#" + formId).serialize(),
		success : function(data) {
			work = 1;
		},
		error : function(responseData, textStatus, errorThrown) {
			work = 0;
		}
	});
	window.history.go(-1);
	if (work == 1) {
		alert("Die Mitarbeiter von MTO melden sich in Kürze");
	} else {
		alert("Fehler beim Übertragen der Daten");

	}
}
